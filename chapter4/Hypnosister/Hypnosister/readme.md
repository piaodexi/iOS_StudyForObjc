
#chap4 뷰와 뷰 계층 구조 

## 뷰 기본 지식
- 뷰는 uiview의 인스턴스이거나 그 하위 클래스의 인스턴스이다.
- 뷰는 자신을 그리는 법을 알고 있다.
- 뷰는 터치와 같은 이벤트를 처리한다.
- 뷰는 뷰 계층구조상에 존재한다. 뷰 계층구조의 루트는 앱의 원도우이다. 

## 뷰 계층구조
ios 앱은 앱의 모든 뷰의 컨테이너 역활을 하는 UIWindow 인스턴스를 하나 가진다. 윈도우는 앱이 실행될 때 만들어진다.그리고 윈도우가 만들어지면 그 윈도우에 다른 뷰들을 추가할 수 있다.   
윈도우에 뷰를 추가할 때 그 뷰를 윈도우의 하위뷰(subview)라 부른다. 윈도우의 하위뷰들 또한 하위뷰를 가질 수 있다. 그 결과가 바로 뷰 객체들의 계층이다. 
그리고 그 계층의 루트가 윈도우이다.   
뷰 계층 구조가 만들어지면 뷰들이 화면에 그려진다. 이과정은 두 단계로 나눌 수 있다.   
- 계층의 몸든 뷰는 윈도우를 가지고 자신을 그린다. 뷰는 그 자체를 자신의 CALayer 인스턴스인 레이어에 나타낸다. (뷰의 레이어는 비트맵 이미지로 생각할 수 있다.)

- 모든 뷰의 레이어들이 화면에 합성된다.   

UIButton과 UILabel과 같은 클래스는 레이어에 자신을 그리는 방법을 이미 알고 있다. 예를 들어 Quiz 앱에서 UILabel 인스턴스를 만들고 표시할 텍스트를 지정했다.
하지만 텍스트를 그리는 방법에 대해서는 알려줄 필요가 없다. 애플의 개발자들이 알아서 처리해놓았다. 

## 뷰와 프레임 
-CGRect 타입은 origin과 size를 맴버로 가진다. origin은 CGPoint 타입의 C 구조체이고 x와 y의 두 float 변수를 가진다. size는 CGSize 타입의 C구조체로 width와 height의 두 float 변수를 가진다.   
C 구조체는 objc 객체가 아니기 때문에 cgrect에 메시지를 보낼 수 없다. cgrect을 만들려면 CGRectMake() 함수를 사용하고 인자로 origin.x, origin.y width, height를 전달 한다. CGRect는 다른 객체들에 비해 작기 때문에 구조체의 포인터를 전달하는 대신에 구조체 전체를 전달한다. 따라서 initWithFrame:은 CGRect *가 아닌 CGRect를 요구한다.   

## drawRect: 메소드에서 그리기 
- drawRect : 메소드는 뷰가 자신을 레이어에 그리는 과정을 진행하는 곳이다. UIView의 하위 클래스들은 직접 그리기를 수행하기 위해 drawRect:를 재정의 한다. 예를들어 UIButton의 drawRect:메소드는 사각영역의 중앙에 연한 파란색의 텍스트를 그린다. 보통 drawRect:를 재정의할때 먼저하는것은 뷰의 bounds 사각 영역을 가져오는 것이다. uiview에서 상속된 bounds 프로퍼티는 뷰가 자신을 그릴 부분을 정의한 사각 영역이다. 각 뷰는 자신을 그릴 때 사용할 좌표계를 가지고 있다. bounds는 뷰가 소유한 좌표계 내의 사각 영역이다. frame은 상위뷰의 좌표계에 속한 bounds와 동일한 사각 영역이다.

- frame: 뷰의 frame 영역은 뷰 계층구조의 나머지 뷰들과 비례하여 해당 뷰의 레이어를 배치하기 위해 합성하는 중에 사용된다. 
- bounds 영역은 뷰의 레이어 경계 내에 세부그림을 배치하기 위해 그리는 과정중에 사용된다.

## 동심원 그리기 
하나의 뷰안에 여러 동심원을 그리는 방법은 여러가지가 있는데 여러개의 UIBezierPath 인스턴스를 만들거나 UIBezierPath에 인스턴스 여러 원을 추가하여 각 원이 하위 경로가 되도록 하는것이다. 
